FROM eclipse-temurin:17-jdk-jammy

COPY . /app

# make sure the jar is executable
RUN chmod -R 777 /app

WORKDIR /app

CMD java -jar Producer.jar -t test -d "(tcp://live-jms-bridge:61616,tcp://backup-jms-bridge:61617)?ha=true&retryInterval=100&retryIntervalMultiplier=1.0&reconnectAttempts=-1&failoverOnServerShutdown=true;" hello || tail -f /dev/null