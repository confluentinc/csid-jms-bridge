<!--
  ~ Copyright 2020 Confluent Inc.
  -->

<configuration xmlns="urn:activemq">
  <core xmlns="urn:activemq:core">
    <acceptors>
      <!-- Default ActiveMQ Artemis Acceptor.  Multi-protocol adapter.  Currently supports Core, OpenWire, Stomp and AMQP. -->
      <acceptor name="activemq">
        tcp://${activemq.remoting.default.host:localhost}:${activemq.remoting.default.port:61616}
      </acceptor>
    </acceptors>

    <address-settings>
      <!--default for catch all-->
      <address-setting match="#">
        <address-full-policy>BLOCK</address-full-policy>
        <dead-letter-address>DLQ</dead-letter-address>
        <expiry-address>ExpiryQueue</expiry-address>
        <max-size-bytes>10Mb</max-size-bytes>
        <message-counter-history-day-limit>10</message-counter-history-day-limit>
        <redelivery-delay>0</redelivery-delay>
      </address-setting>
    </address-settings>

    <bindings-directory>./target/bindings</bindings-directory>

    <connectors>
      <!-- Default Connector.  Returned to clients during broadcast and distributed around cluster.  See broadcast and discovery-groups -->
      <connector name="activemq">
        tcp://${activemq.remoting.default.host:localhost}:${activemq.remoting.default.port:61616}
      </connector>
    </connectors>

    <journal-directory>./target/journal</journal-directory>

    <journal-min-files>2</journal-min-files>

    <large-messages-directory>./target/large-messages</large-messages-directory>

    <paging-directory>./target/paging</paging-directory>

    <security-enabled>false</security-enabled>
  </core>
  <jms xmlns="urn:activemq:jms">
    <queue name="DLQ"/>
    <queue name="ExpiryQueue"/>
  </jms>
</configuration>
